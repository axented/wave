(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{aOzD:function(t,e,i){"use strict";i.r(e),i.d(e,"CustomersModule",function(){return v});var a=i("ofXK"),b=i("1kSV"),o=i("njyG"),r=i("tyNb"),n=i("3Pt+");class c{constructor(t){this.id=t.id,this.amountDue=t.amountDue,this.billing=t.billing,this.contactName=t.contactName,this.currency=t.currency,this.email=t.email,this.img=t.img,this.name=t.name,this.ownerId=t.ownerId,this.phone=t.phone,this.registeredOn=t.registeredOn,this.role=t.role,this.shipping=t.shipping,this.status=t.status,this.website=t.website}}var d=i("wd/R"),s=i("5eHb"),l=i("fXoL"),m=i("UbJi"),u=i("T/S4"),p=i("eSIH");let h=(()=>{class t{constructor(t,e,i,a,b){this.activeModal=t,this.auth=e,this.fb=i,this.firestoreService=a,this.toastr=b,this.billingForm=this.fb.group({address:["",n.t.required],city:["",n.t.required],country:["",n.t.required],name:["",n.t.required],phone:["",n.t.required],state:["",n.t.required],zipCode:["",n.t.required]}),this.customerForm=this.fb.group({contactName:[""],currency:["",n.t.required],email:["",[n.t.required,n.t.email]],name:["",n.t.required],phone:["",n.t.required],website:[""]}),this.shippingForm=this.fb.group({address:["",n.t.required],city:["",n.t.required],country:["",n.t.required],name:["",n.t.required],phone:["",n.t.required],state:["",n.t.required],zipCode:["",n.t.required]})}ngOnInit(){""!=this.id&&this.getCustomer()}getStatusForms(){return!(this.customerForm.valid&&this.billingForm.valid&&this.shippingForm.valid)}setSubmitText(){return""==this.id?"Add Customer":"Save changes"}submitCustomer(t){this.auth.currentUser.then(e=>{var i,a,b,o,r,n;let s=new c({id:"",amountDue:0,billing:this.billingForm.value,contactName:null===(i=t.get("contactName"))||void 0===i?void 0:i.value,currency:null===(a=t.get("currency"))||void 0===a?void 0:a.value,email:null===(b=t.get("email"))||void 0===b?void 0:b.value,img:"https://avatars.dicebear.com/api/human/-01.svg",name:null===(o=t.get("name"))||void 0===o?void 0:o.value,ownerId:e.uid,phone:null===(r=t.get("phone"))||void 0===r?void 0:r.value,registeredOn:d().format("ll"),role:"Customer",shipping:this.shippingForm.value,status:"Active",website:null===(n=t.get("website"))||void 0===n?void 0:n.value});""==this.id?this.firestoreService.createCustomer(s).then(()=>{this.toastr.success("Customer added"),this.activeModal.close()},t=>{console.error("Something went wrong: ",t)}):this.firestoreService.updateCustomer(this.id,s).then(()=>{this.toastr.success("Changes saved"),this.activeModal.close()},t=>{console.error("Something went wrong: ",t)})})}getCustomer(){this.firestoreService.getCustomer(this.id).subscribe(t=>{this.billingForm.patchValue({address:t.payload.data().billing.address,city:t.payload.data().billing.city,country:t.payload.data().billing.country,name:t.payload.data().billing.name,phone:t.payload.data().billing.phone,state:t.payload.data().billing.state,zipCode:t.payload.data().billing.zipCode}),this.customerForm.patchValue({contactName:t.payload.data().contactName,currency:t.payload.data().currency,email:t.payload.data().email,name:t.payload.data().name,phone:t.payload.data().phone,website:t.payload.data().website}),this.shippingForm.patchValue({address:t.payload.data().shipping.address,city:t.payload.data().shipping.city,country:t.payload.data().shipping.country,name:t.payload.data().shipping.name,phone:t.payload.data().shipping.phone,state:t.payload.data().shipping.state,zipCode:t.payload.data().shipping.zipCode})})}}return t.\u0275fac=function(e){return new(e||t)(l.Pb(b.a),l.Pb(m.a),l.Pb(n.e),l.Pb(u.a),l.Pb(s.b))},t.\u0275cmp=l.Jb({type:t,selectors:[["app-add-customer"]],inputs:{id:"id"},features:[l.Cb([s.b])],decls:160,vars:5,consts:[[1,"modal-header"],[1,"content","container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"card-title"],[3,"formGroup"],[1,"col-md-6"],[1,"form-group"],["id","name","name","name","formControlName","name","type","text","required","",1,"form-control"],["id","email","name","email","formControlName","email","type","text","required","",1,"form-control"],["width","100%","formControlName","currency"],["id","contactName","name","contactName","formControlName","contactName","type","text",1,"form-control"],["id","phone","name","phone","formControlName","phone","type","text","required","",1,"form-control"],["id","website","name","website","formControlName","website","type","text",1,"form-control"],[1,"card-title","mt-4"],["id","state","name","state","formControlName","state","type","text","required","",1,"form-control"],["rows","5","cols","5","placeholder","Enter Address","formControlName","address",1,"form-control"],["width","100%","formControlName","country"],["selected",""],["id","city","name","city","formControlName","city","type","text","required","",1,"form-control"],["id","zipCode","name","zipCode","formControlName","zipCode","type","text","required","",1,"form-control"],[1,"text-right"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"text-right","mt-4"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(t,e){1&t&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"div",2),l.Ub(3,"div",3),l.Ub(4,"div",4),l.Ub(5,"div",5),l.Ub(6,"h4",6),l.Dc(7,"Basic Info"),l.Tb(),l.Ub(8,"form",7),l.Ub(9,"div",2),l.Ub(10,"div",8),l.Ub(11,"div",9),l.Ub(12,"label"),l.Dc(13,"Name"),l.Tb(),l.Qb(14,"input",10),l.Tb(),l.Ub(15,"div",9),l.Ub(16,"label"),l.Dc(17,"Email"),l.Tb(),l.Qb(18,"input",11),l.Tb(),l.Ub(19,"div",9),l.Ub(20,"label"),l.Dc(21,"Primary Currency"),l.Tb(),l.Ub(22,"ng-select2",12),l.Ub(23,"option"),l.Dc(24,"Select Currency"),l.Tb(),l.Ub(25,"option"),l.Dc(26,"EUR Euro"),l.Tb(),l.Ub(27,"option"),l.Dc(28,"INR Indoan Rupee"),l.Tb(),l.Ub(29,"option"),l.Dc(30,"USD- US Dollar"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(31,"div",8),l.Ub(32,"div",9),l.Ub(33,"label"),l.Dc(34,"Primary Contact Name"),l.Tb(),l.Qb(35,"input",13),l.Tb(),l.Ub(36,"div",9),l.Ub(37,"label"),l.Dc(38,"Phone"),l.Tb(),l.Qb(39,"input",14),l.Tb(),l.Ub(40,"div",9),l.Ub(41,"label"),l.Dc(42,"Website"),l.Tb(),l.Qb(43,"input",15),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(44,"h4",16),l.Dc(45,"Billing Address"),l.Tb(),l.Ub(46,"form",7),l.Ub(47,"div",2),l.Ub(48,"div",8),l.Ub(49,"div",9),l.Ub(50,"label"),l.Dc(51,"Name"),l.Tb(),l.Qb(52,"input",10),l.Tb(),l.Ub(53,"div",9),l.Ub(54,"label"),l.Dc(55,"State"),l.Tb(),l.Qb(56,"input",17),l.Tb(),l.Ub(57,"div",9),l.Ub(58,"label"),l.Dc(59,"Address"),l.Tb(),l.Ub(60,"textarea",18),l.Dc(61,"\t\t\t\t\t\t\t\t\t\t"),l.Tb(),l.Tb(),l.Tb(),l.Ub(62,"div",8),l.Ub(63,"div",9),l.Ub(64,"label"),l.Dc(65,"Country"),l.Tb(),l.Ub(66,"ng-select2",19),l.Ub(67,"option"),l.Dc(68,"Select Country"),l.Tb(),l.Ub(69,"option"),l.Dc(70,"Afghanistan"),l.Tb(),l.Ub(71,"option"),l.Dc(72,"Afghanistan"),l.Tb(),l.Ub(73,"option"),l.Dc(74,"Albania"),l.Tb(),l.Ub(75,"option"),l.Dc(76,"Algeria"),l.Tb(),l.Ub(77,"option"),l.Dc(78,"American Samoa"),l.Tb(),l.Ub(79,"option"),l.Dc(80,"Andorra"),l.Tb(),l.Ub(81,"option"),l.Dc(82,"Angola"),l.Tb(),l.Ub(83,"option"),l.Dc(84,"Anguilla"),l.Tb(),l.Ub(85,"option",20),l.Dc(86,"United States"),l.Tb(),l.Tb(),l.Tb(),l.Ub(87,"div",9),l.Ub(88,"label"),l.Dc(89,"City"),l.Tb(),l.Qb(90,"input",21),l.Tb(),l.Ub(91,"div",9),l.Ub(92,"label"),l.Dc(93,"Phone"),l.Tb(),l.Qb(94,"input",14),l.Tb(),l.Ub(95,"div",9),l.Ub(96,"label"),l.Dc(97,"Zip Code"),l.Tb(),l.Qb(98,"input",22),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(99,"h4",16),l.Dc(100,"Shipping Address"),l.Tb(),l.Ub(101,"form",7),l.Ub(102,"div",23),l.Ub(103,"button",24),l.ec("click",function(){return e.shippingForm.patchValue(e.billingForm.value)}),l.Dc(104," Copy from Billing "),l.Tb(),l.Tb(),l.Ub(105,"div",2),l.Ub(106,"div",8),l.Ub(107,"div",9),l.Ub(108,"label"),l.Dc(109,"Name"),l.Tb(),l.Qb(110,"input",10),l.Tb(),l.Ub(111,"div",9),l.Ub(112,"label"),l.Dc(113,"State"),l.Tb(),l.Qb(114,"input",17),l.Tb(),l.Ub(115,"div",9),l.Ub(116,"label"),l.Dc(117,"Address"),l.Tb(),l.Ub(118,"textarea",18),l.Dc(119,"\t\t\t\t\t\t\t\t\t\t"),l.Tb(),l.Tb(),l.Tb(),l.Ub(120,"div",8),l.Ub(121,"div",9),l.Ub(122,"label"),l.Dc(123,"Country"),l.Tb(),l.Ub(124,"ng-select2",19),l.Ub(125,"option"),l.Dc(126,"Select Country"),l.Tb(),l.Ub(127,"option"),l.Dc(128,"Afghanistan"),l.Tb(),l.Ub(129,"option"),l.Dc(130,"Afghanistan"),l.Tb(),l.Ub(131,"option"),l.Dc(132,"Albania"),l.Tb(),l.Ub(133,"option"),l.Dc(134,"Algeria"),l.Tb(),l.Ub(135,"option"),l.Dc(136,"American Samoa"),l.Tb(),l.Ub(137,"option"),l.Dc(138,"Andorra"),l.Tb(),l.Ub(139,"option"),l.Dc(140,"Angola"),l.Tb(),l.Ub(141,"option"),l.Dc(142,"Anguilla"),l.Tb(),l.Ub(143,"option",20),l.Dc(144,"United States"),l.Tb(),l.Tb(),l.Tb(),l.Ub(145,"div",9),l.Ub(146,"label"),l.Dc(147,"City"),l.Tb(),l.Qb(148,"input",21),l.Tb(),l.Ub(149,"div",9),l.Ub(150,"label"),l.Dc(151,"Phone"),l.Tb(),l.Qb(152,"input",14),l.Tb(),l.Ub(153,"div",9),l.Ub(154,"label"),l.Dc(155,"Zip Code"),l.Tb(),l.Qb(156,"input",22),l.Tb(),l.Tb(),l.Tb(),l.Ub(157,"div",25),l.Ub(158,"button",26),l.ec("click",function(){return e.submitCustomer(e.customerForm)}),l.Dc(159),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Db(8),l.mc("formGroup",e.customerForm),l.Db(38),l.mc("formGroup",e.billingForm),l.Db(55),l.mc("formGroup",e.shippingForm),l.Db(57),l.mc("disabled",e.getStatusForms()),l.Db(1),l.Fc(" ",e.setSubmitText()," "))},directives:[n.v,n.m,n.g,n.c,n.l,n.f,n.r,p.a,n.p,n.u],encapsulation:2}),t})();function U(t,e){if(1&t){const t=l.Vb();l.Ub(0,"tr"),l.Ub(1,"td"),l.Ub(2,"h2",29),l.Ub(3,"a",30),l.Qb(4,"img",31),l.Tb(),l.Ub(5,"a",8),l.Dc(6),l.Ub(7,"span"),l.Dc(8),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(9,"td"),l.Dc(10),l.Tb(),l.Ub(11,"td"),l.Dc(12),l.Tb(),l.Ub(13,"td"),l.Dc(14),l.hc(15,"date"),l.Tb(),l.Ub(16,"td"),l.Ub(17,"span",32),l.Dc(18),l.Tb(),l.Tb(),l.Ub(19,"td",27),l.Ub(20,"a",33),l.ec("click",function(){l.vc(t);const i=e.$implicit;return l.gc().openCustomerModal(i.id)}),l.Qb(21,"i",34),l.Dc(22," Edit"),l.Tb(),l.Ub(23,"a",35),l.ec("click",function(){l.vc(t);const i=e.$implicit;return l.gc().deleteCustomer(i)}),l.Qb(24,"i",36),l.Dc(25,"Delete"),l.Tb(),l.Tb(),l.Tb()}if(2&t){const t=e.$implicit;l.Db(3),l.mc("routerLink","/profile"),l.Db(1),l.nc("src",t.img,l.xc),l.Db(1),l.mc("routerLink","/profile"),l.Db(1),l.Ec(t.name),l.Db(2),l.Ec(t.phone),l.Db(2),l.Ec(t.email),l.Db(2),l.Fc("$ ",t.amountDue,""),l.Db(2),l.Ec(l.jc(15,10,t.registeredOn,"dd MMM yyyy")),l.Db(3),l.mc("ngClass","Active"===t.status?"badge badge-pill bg-success-light":"badge badge-pill bg-danger-light"),l.Db(1),l.Ec(t.status)}}const T=[{path:"",component:(()=>{class t{constructor(t,e,i){this.auth=t,this.firestoreService=e,this.modalService=i,this.customers=[],this.errorMessage=""}ngOnInit(){this.auth.currentUser.then(t=>{this.getCustomers(t)})}deleteCustomer(t){this.firestoreService.deleteCustomer(t.id)}openCustomerModal(t){this.modalService.open(h,{animation:!0,size:"lg"}).componentInstance.id=t}getCustomers(t){this.firestoreService.getCustomers().subscribe(e=>{this.customers=[],e.forEach(e=>{e.payload.doc.data().ownerId===t.uid&&this.customers.push({id:e.payload.doc.id,amountDue:e.payload.doc.data().amountDue,billing:e.payload.doc.data().billing,contactName:e.payload.doc.data().contactName,currency:e.payload.doc.data().currency,email:e.payload.doc.data().email,img:e.payload.doc.data().img,name:e.payload.doc.data().name,ownerId:e.payload.doc.data().ownerId,phone:e.payload.doc.data().phone,registeredOn:e.payload.doc.data().registeredOn,role:e.payload.doc.data().role,shipping:e.payload.doc.data().shipping,status:e.payload.doc.data().status,website:e.payload.doc.data().website})})},t=>this.errorMessage=t)}}return t.\u0275fac=function(e){return new(e||t)(l.Pb(m.a),l.Pb(u.a),l.Pb(b.c))},t.\u0275cmp=l.Jb({type:t,selectors:[["app-customers"]],decls:58,vars:2,consts:[[1,"page-wrapper"],[1,"content","container-fluid"],[1,"page-header"],[1,"row","align-items-center"],[1,"col"],[1,"page-title"],[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],[1,"breadcrumb-item","active"],[1,"col-auto"],["href","javascript:void(0)",1,"btn","btn-primary","mr-1",3,"click"],[1,"fas","fa-plus"],["href","javascript:void(0);",1,"btn","btn-primary","filter-btn"],[1,"fas","fa-filter"],["id","filter_inputs",1,"card","filter-card"],[1,"card-body","pb-0"],[1,"row"],[1,"col-sm-6","col-md-3"],[1,"form-group"],["type","text",1,"form-control"],[1,"col-sm-12"],[1,"card","card-table"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-center","table-hover","datatable"],[1,"thead-light"],[1,"text-right"],[4,"ngFor","ngForOf"],[1,"table-avatar"],[1,"avatar","avatar-sm","mr-2",3,"routerLink"],["alt","User Image",1,"avatar-img","rounded-circle",3,"src"],[3,"ngClass"],["href","javascript:void(0);",1,"btn","btn-sm","btn-white","text-success","mr-2",3,"click"],[1,"far","fa-edit","mr-1"],["href","javascript:void(0);",1,"btn","btn-sm","btn-white","text-danger","mr-2",3,"click"],[1,"far","fa-trash-alt","mr-1"]],template:function(t,e){1&t&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"div",2),l.Ub(3,"div",3),l.Ub(4,"div",4),l.Ub(5,"h3",5),l.Dc(6,"Customers"),l.Tb(),l.Ub(7,"ul",6),l.Ub(8,"li",7),l.Ub(9,"a",8),l.Dc(10,"Dashboard"),l.Tb(),l.Tb(),l.Ub(11,"li",9),l.Dc(12,"Customers"),l.Tb(),l.Tb(),l.Tb(),l.Ub(13,"div",10),l.Ub(14,"a",11),l.ec("click",function(){return e.openCustomerModal("")}),l.Qb(15,"i",12),l.Tb(),l.Ub(16,"a",13),l.Qb(17,"i",14),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(18,"div",15),l.Ub(19,"div",16),l.Ub(20,"div",17),l.Ub(21,"div",18),l.Ub(22,"div",19),l.Ub(23,"label"),l.Dc(24,"Name"),l.Tb(),l.Qb(25,"input",20),l.Tb(),l.Tb(),l.Ub(26,"div",18),l.Ub(27,"div",19),l.Ub(28,"label"),l.Dc(29,"Email"),l.Tb(),l.Qb(30,"input",20),l.Tb(),l.Tb(),l.Ub(31,"div",18),l.Ub(32,"div",19),l.Ub(33,"label"),l.Dc(34,"Phone"),l.Tb(),l.Qb(35,"input",20),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(36,"div",17),l.Ub(37,"div",21),l.Ub(38,"div",22),l.Ub(39,"div",23),l.Ub(40,"div",24),l.Ub(41,"table",25),l.Ub(42,"thead",26),l.Ub(43,"tr"),l.Ub(44,"th"),l.Dc(45,"Customer"),l.Tb(),l.Ub(46,"th"),l.Dc(47,"Email"),l.Tb(),l.Ub(48,"th"),l.Dc(49,"Amount Due"),l.Tb(),l.Ub(50,"th"),l.Dc(51,"Registered On"),l.Tb(),l.Ub(52,"th"),l.Dc(53,"Status"),l.Tb(),l.Ub(54,"th",27),l.Dc(55,"Actions"),l.Tb(),l.Tb(),l.Tb(),l.Ub(56,"tbody"),l.Bc(57,U,26,13,"tr",28),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&t&&(l.Db(9),l.mc("routerLink",""),l.Db(48),l.mc("ngForOf",e.customers))},directives:[r.d,a.k,a.j],pipes:[a.d],styles:[""]}),t})()}];let g=(()=>{class t{}return t.\u0275mod=l.Nb({type:t}),t.\u0275inj=l.Mb({factory:function(e){return new(e||t)},imports:[[r.e.forChild(T)],r.e]}),t})(),v=(()=>{class t{}return t.\u0275mod=l.Nb({type:t}),t.\u0275inj=l.Mb({factory:function(e){return new(e||t)},imports:[[a.b,g,o.a,b.d,p.b,n.i,n.q,s.a.forRoot({positionClass:"toast-bottom-right"})]]}),t})()}}]);